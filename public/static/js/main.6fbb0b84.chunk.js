(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){e.exports=a(202)},110:function(e,t,a){},134:function(e,t,a){},178:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),l=a.n(o),i=a(67),c=(a(109),a(110),a(2)),s=a(5),u=a(4),m=a(7),p=a(6),d=a(8),h=a(95),g=a(50),f=a(25),b=a(98),v=a.n(b),E=a(41),y=a.n(E),k=a(29),O=a.n(k),x=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(v.a,null,r.a.createElement(y.a,{bg:"white",variant:"light",expand:"sm",fixed:"top",collapseOnSelect:"true"},r.a.createElement(f.LinkContainer,{to:"/"},r.a.createElement(y.a.Brand,null," ","Med",r.a.createElement("b",null,"Direct"))),r.a.createElement(y.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(y.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(O.a,{className:"mr-auto"},r.a.createElement(f.LinkContainer,{to:"/form"},r.a.createElement(O.a.Link,null,"Form Component")),r.a.createElement(f.LinkContainer,{to:"/map"},r.a.createElement(O.a.Link,null,"Map Component")),this.props.currentUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.LinkContainer,{to:"/map"},r.a.createElement(O.a.Link,{onClick:function(){return e.props.logoutClick()}},"Log Out"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(f.LinkContainer,{to:"/signup"},r.a.createElement(O.a.Link,null,"S'enregistrer")),r.a.createElement(f.LinkContainer,{to:"/login"},r.a.createElement(O.a.Link,null,"Se connecter")))))))}}]),t}(n.Component),j=a(3),C=a(35),S=a.n(C),N=a(19),w=a.n(N),P=(a(134),function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e,a))).state={show:!1},n.handleShow=n.handleShow.bind(Object(j.a)(n)),n.handleClose=n.handleClose.bind(Object(j.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"bg-light"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12 pt-4"},r.a.createElement("h1",{className:"display-3 pt-4"},r.a.createElement("span",{className:"text-primary"},"Med"),r.a.createElement("span",{className:"text-muted"},"Direct"))),r.a.createElement("div",{className:"col-lg-8  order-first order-md-1"},r.a.createElement("img",{src:"/images/illustrations/medicine.svg",alt:"Illustration calme et apaisante de deux docteurs dans un hopital",className:"img-fluid"})),r.a.createElement("div",{className:"col-lg-4 py-4 pr-0"},r.a.createElement("p",{className:"lead mb-3"},"MedDirect vous aide a trouver les meilleurs soins d'urgence adapt\xe9s \xe0 vos besoins."),r.a.createElement("p",{className:"text-muted"},"Estimez les temps d'attente dans les centres de soins \xe0 proximit\xe9 et trouvez des alternatives sans attendre!"),r.a.createElement(w.a,{variant:"primary",size:"lg",className:"mt-3",onClick:this.handleShow},"Commencer"))))),r.a.createElement(S.a,Object.assign({},this.props,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:this.state.show,onHide:this.handleClose}),r.a.createElement(S.a.Header,null,r.a.createElement(S.a.Title,{id:"contained-modal-title-vcenter"},"Est-ce une urgence vitale?")),r.a.createElement(S.a.Body,null,r.a.createElement("p",null,"Si vous pensez que votre vie ou celle d'un proche est en danger, appellez le SAMU, sinon merci de ",r.a.createElement("b",null,"cliquer sur Continuer."))),r.a.createElement(S.a.Footer,null,r.a.createElement("a",{href:"tel:+3315"},r.a.createElement(w.a,{variant:"danger"},r.a.createElement("i",{className:"fas fa-phone"})," Appeller le SAMU (15)")),r.a.createElement(f.LinkContainer,{to:"/form"},r.a.createElement(w.a,{variant:"primary"},r.a.createElement("i",{className:"fas fa-arrow-right"})," Continuer")))),r.a.createElement("footer",{className:"bg-light"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"small text-muted p-5"},"Done with love by Christina Bailey, Christophe Begue, Thomas Lesage, Samuel Bouaroua, and Raphael Veil.")))))}}]),t}(n.PureComponent)),L=a(24),T=a.n(L),I=(a(178),a(28)),A=a(42),M="M20.2,15.7L20.2,15.7c1.1-1.6,1.8-3.6,1.8-5.7c0-5.6-4.5-10-10-10S2,4.5,2,10c0,2,0.6,3.9,1.6,5.4c0,0.1,0.1,0.2,0.2,0.3\n  c0,0,0.1,0.1,0.1,0.2c0.2,0.3,0.4,0.6,0.7,0.9c2.6,3.1,7.4,7.6,7.4,7.6s4.8-4.5,7.4-7.5c0.2-0.3,0.5-0.6,0.7-0.9\n  C20.1,15.8,20.2,15.8,20.2,15.7z",U={cursor:"pointer",fill:"#74b6f9",stroke:"none",opacity:.5,size:25},D={cursor:"pointer",fill:"#ef6c60",stroke:"none",opacity:1,size:25},z={cursor:"pointer",fill:"#74b6f9",stroke:"none",opacity:.5,size:25},G={cursor:"pointer",fill:"#74b6f9",stroke:"none",opacity:1,size:25},V=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.size,a=void 0===t?20:t,n=e.onClick,o=this.props.oneItem.group,l=this.props.oneItem.filtered;return o&&l?r.a.createElement("div",null,r.a.createElement("svg",{version:"1.1",id:"Calque_1",x:"0px",y:"0px",viewBox:"0 0 384 512","enable-background":"new 0 0 384 512",height:a,style:Object(A.a)({},D,{transform:"translate(".concat(-a/2,"px,").concat(-a,"px)")}),onClick:n},r.a.createElement("path",{d:"M192,0C86,0,0,86,0,192c0,77.4,27,99,172.3,309.7c9.5,13.8,29.9,13.8,39.5,0C357,291,384,269.4,384,192 C384,86,298,0,192,0z M264,286h-39.8v-68.9h-64.3V286H120V121.1h39.8v62.4h64.3v-62.4H264V286z"}))):o&&!l?r.a.createElement("div",null,r.a.createElement("svg",{height:a,viewBox:"0 0 24 24",style:Object(A.a)({},U,{transform:"translate(".concat(-a/2,"px,").concat(-a,"px)")}),onClick:n},r.a.createElement("path",{d:M}))):!o&&l?r.a.createElement("div",null,r.a.createElement("svg",{version:"1.1",id:"Calque_1",x:"0px",y:"0px",viewBox:"0 0 384 512","enable-background":"new 0 0 384 512",height:a,style:Object(A.a)({},G,{transform:"translate(".concat(-a/2,"px,").concat(-a,"px)")}),onClick:n},r.a.createElement("path",{d:"M192,0C86,0,0,86,0,192c0,77.4,27,99,172.3,309.7c9.5,13.8,29.9,13.8,39.5,0C357,291,384,269.4,384,192 C384,86,298,0,192,0z M239.1,283.1c-10.7,4.9-23.1,7.3-37,7.3c-12.7,0-24.5-2.1-35.3-6.3c-10.8-4.2-20.1-10.1-28.1-17.8 c-7.9-7.7-14.1-16.9-18.6-27.6c-4.5-10.7-6.8-22.5-6.8-35.4c0-13.2,2.3-25.2,6.9-35.9c4.6-10.7,10.9-19.8,19-27.4 c8.1-7.5,17.5-13.3,28.4-17.3c10.9-4,22.6-6.1,35.2-6.1c11.6,0,23.1,2.1,34.3,6.2c11.3,4.1,20.4,10.1,27.4,18l-27,27 c-3.7-5.1-8.6-8.9-14.7-11.4c-6.1-2.5-12.3-3.7-18.6-3.7c-7,0-13.4,1.3-19.2,3.8c-5.8,2.6-10.8,6.1-15,10.6c-4.2,4.5-7.5,9.8-9.8,16 c-2.3,6.1-3.5,12.8-3.5,20.1c0,7.5,1.2,14.3,3.5,20.5c2.3,6.2,5.5,11.5,9.7,16c4.1,4.4,9,7.9,14.8,10.4c5.7,2.5,12,3.7,18.9,3.7 c7.9,0,14.8-1.5,20.7-4.7c5.9-3.1,10.6-7.1,14.2-12.1l27.7,26.1C258.8,271.6,249.8,278.2,239.1,283.1z"}))):r.a.createElement("div",null,r.a.createElement("svg",{height:a,viewBox:"0 0 24 24",style:Object(A.a)({},z,{transform:"translate(".concat(-a/2,"px,").concat(-a,"px)")}),onClick:n},r.a.createElement("path",{d:M})))}}]),t}(n.PureComponent),R=(a(180),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"dot",style:{cursor:"pointer",transform:"translate(".concat(-10,"px,").concat(-10,"px)")}},r.a.createElement("div",{className:"centraldot"}),r.a.createElement("div",{className:"wave"}),r.a.createElement("div",{className:"wave2"}))}}]),t}(n.PureComponent)),B=(a(181),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.popupInfo;return r.a.createElement(I.c,{className:"PopUp",longitude:e.longitude,latitude:e.latitude,closeOnClick:!1,anchor:"top",onClose:this.props.onCloseClick},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("p",{className:"card-text small"}," ",r.a.createElement("b",null,e.name)),r.a.createElement("p",{className:"card-text small"},r.a.createElement("a",{href:"tel:+33{popupInfo.phoneNumber}"},e.phoneNumber)),r.a.createElement("p",{className:"card-text small"},e.streetNumber," ",e.roadType," ",e.streetName,r.a.createElement("br",null),e.zipCode," ",e.city),r.a.createElement("a",{href:"http://maps.google.com/?q=<{popupInfo.latitude}>,<{popupInfo.longitude}>",className:"card-link small"},"Route Me"),r.a.createElement("a",{href:e.urlToPlan,className:"card-link small"},"Access Plan"))))}}]),t}(n.Component)),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={hospitalArray:[],structureArray:[],altStructure:[],newstructureArray:[],viewport:{latitude:48.85341,longitude:2.3488,zoom:10,pitch:45,bearing:-17.6},popupInfo:null},a._onViewportChange=a._onViewportChange.bind(Object(j.a)(a)),a.renderUserMarker=a.renderUserMarker.bind(Object(j.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"renderMapAndMarkers",value:function(){var e=this;return this.props.structureArray.map(function(t,a){return r.a.createElement(I.b,{key:"marker-".concat(a),longitude:t.longitude,latitude:t.latitude},r.a.createElement(V,{structureArray:e.props.structureArray,oneItem:t,onClick:function(){return e.setState({popupInfo:t})}}))})}},{key:"clearPopup",value:function(){this.setState({popupInfo:null})}},{key:"_onViewportChange",value:function(e){this.setState({viewport:e})}},{key:"renderPopup",value:function(){var e=this,t=this.state.popupInfo;return t&&r.a.createElement(B,{popupInfo:t,onCloseClick:function(){return e.clearPopup()}})}},{key:"renderUserMarker",value:function(e){if(e)return r.a.createElement(I.b,{latitude:e.latitude,longitude:e.longitude},r.a.createElement(R,null))}},{key:"_goToViewport",value:function(e,t){this._onViewportChange({viewport:{longitude:e,latitude:t},zoom:14,transitionInterpolator:new I.a,transitionDuration:2500})}},{key:"render",value:function(){var e=this.state.viewport,t=this.props.userLocation;return console.log(this.props.structureArray,"coucou"),r.a.createElement(I.d,Object.assign({},e,{mapboxApiAccessToken:"pk.eyJ1IjoicHJvamVjdDNpcm9uaGFjayIsImEiOiJjanNpdzA4aXcxemloNDRueDBkaXlkZDh0In0.bbNCzs-0njORLSHu9bXeDQ",mapStyle:"mapbox://styles/project3ironhack/cjsk4xibk5rjh1fmqo9k31hym",width:"100%",height:window.innerHeight-56,onViewportChange:this._onViewportChange}),this.renderUserMarker(t),this.renderMapAndMarkers(),this.renderPopup())}}]),t}(n.Component),H=a(62),q=a.n(H),_=a(27),J=a.n(_),X=a(21),K=a.n(X),Q=a(100),W=a.n(Q),Y=a(96),Z="pk.eyJ1IjoicHJvamVjdDNpcm9uaGFjayIsImEiOiJjanNpdzA4aXcxemloNDRueDBkaXlkZDh0In0.bbNCzs-0njORLSHu9bXeDQ",$=T.a.create({baseURL:"",withCredentials:!0});function ee(e){throw e.response&&e.response.data?console.log("API Error",e.response.data):console.log("React Code Error",e),alert("Sorry! Something went wrong."),e}function te(e,t){return $.get("/api/alternatives-structures/near?latitude=".concat(e,"&longitude=").concat(t,"&radius=50000"))}var ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).setRedirect=function(){a.setState({redirect:!0})},a.renderRedirect=function(){if(a.state.redirect)return r.a.createElement(Y.a,{to:"/"})},a.state={open:!0,hospitalArray:[],altStructure:[],newstructureArray:[],structureArray:[],isSubmitSuccessful:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e,t,a=this,n=this.props.userLocation;n&&T.a.all([(e=n.latitude,t=n.longitude,$.get("/api/hospitals/near?latitude=".concat(e,"&longitude=").concat(t,"&radius=50000"))),te(n.latitude,n.longitude)]).then(T.a.spread(function(e,t){var r=a.props,o=r.neededSpecialist,l=r.patientType,i=e.data||[],c=t.data||[],s=0;for(s=0;s<=10;s++)c[s].filtered=!0;var u=c.slice(0,10),m=i.filter(function(e){if(e.availablePoles)return e.filtered=e.availablePoles.some(function(e){return e.pathology===o&&(e.patientType===l||"Universel"===e.patientType)}),e.filtered}),p=u.concat(m).slice(0,20);console.log(p);var d=p.map(function(e){return(t=n.longitude,a=n.latitude,r=e.longitude,o=e.latitude,T.a.get("https://api.mapbox.com/directions-matrix/v1/mapbox/walking/".concat(t,",").concat(a,";").concat(r,",").concat(o,"?sources=1&annotations=distance,duration&access_token=").concat(Z)).catch(ee)).then(function(t){e.duration=Math.round(t.data.durations[0][0]/60)});var t,a,r,o});T.a.all(d).then(function(){p.sort(function(e,t){return e.duration-t.duration}),console.log(p),a.setState({newstructureArray:p})});var h=i.concat(c);console.log(h),a.setState({structureArray:h,hospitalArray:i,altStructure:c,newstructureArray:p})})).catch(function(){W.a.fire({position:"center",type:"info",title:"Etes-vous s\xfbr d avoir suivi le questionnaire?",showConfirmButton:!1,timer:2e3}),a.setState({isSubmitSuccessful:!0})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.newstructureArray,n=t.open;return this.state.isSubmitSuccessful?r.a.createElement(Y.a,{to:"/"}):r.a.createElement(J.a,{className:"no-gutters"},r.a.createElement(K.a,{sm:{span:12,order:2},md:{span:4,order:2},id:"map-filter"},r.a.createElement("div",{id:"accordion"},r.a.createElement("div",{className:"card border-bottom-0"},r.a.createElement("div",{className:"card-header",id:"headingOne"},n?r.a.createElement(w.a,{variant:"primary",size:"lg",block:!0,className:"d-md-none",onClick:function(){return e.setState({open:!n})},"aria-controls":"example-collapse-text","aria-expanded":n},r.a.createElement("p",{className:"clollapsBtnText"},"Carte seulement")):r.a.createElement(w.a,{variant:"outline-primary",size:"lg",block:!0,className:"d-md-none",onClick:function(){return e.setState({open:!n})},"aria-controls":"example-collapse-text","aria-expanded":n},r.a.createElement("p",{className:"clollapsBtnText"},"Carte et propositions"))),r.a.createElement(q.a,{in:this.state.open,className:" dimension",id:"example-collapse-text"},r.a.createElement("div",{"aria-labelledby":"headingOne","data-parent":"#accordion"},r.a.createElement("table",{className:"table scrolling"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",{className:"title1Col",scope:"col"},"Tri/Pertinence"),r.a.createElement("th",{className:"text-center colDeux",scope:"col"},"Ouverte"),r.a.createElement("th",{className:"text-center colDeux",scope:"col"},"Attente"))),r.a.createElement("tbody",null,a.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,r.a.createElement("ul",{className:"list-group list-group-flush resultTb FCol"},r.a.createElement("li",{className:"list-group-item namePolice small"},r.a.createElement("b",null,e.name)),r.a.createElement("li",{className:"list-group-item typePolice"},r.a.createElement("a",{href:"tel:+33{popupInfo.phoneNumber}"},e.phoneNumber)," "))),r.a.createElement("td",{className:"cel  colDeux"},e.AppelPrealable?r.a.createElement("span",{className:"badge badge-success badge-pill"},"Oui"):r.a.createElement("span",{className:"badge badge-danger badge-pill"},"Non")),r.a.createElement("td",{className:"cel colDeux"},r.a.createElement("ul",{className:"list-group list-unstyled resultTb"},r.a.createElement("li",{className:"list-list-unstyled"},r.a.createElement("span",{className:"badge badge-primary"},e.duration," min")))))})))))))),r.a.createElement(K.a,{sm:{span:12,order:2},md:{span:8,order:2}},r.a.createElement(F,{hospitalArray:this.state.hospitalArray,altStructure:this.state.altStructure,newstructureArray:this.state.newstructureArray,structureArray:this.state.structureArray,userLocation:this.props.userLocation})))}}]),t}(n.Component),ne=(a(182),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"NotFound"},r.a.createElement("h2",null,"404 Not Found"),r.a.createElement("p",null,"The page you are looking for is not available."))}}]),t}(n.Component)),re=(a(183),a(93),a(101)),oe=a.n(re),le=a(64),ie=a(38),ce=(a(184),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={isVisible:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({isVisible:!this.state.isVisible})}},{key:"clickHandler",value:function(e){this.props.updatePatient(e),this.props.nextStep()}},{key:"render",value:function(){var e=this;return r.a.createElement(K.a,null,r.a.createElement("div",{className:"card flex-row m-3 bg-white",key:this.props.index},r.a.createElement("div",{className:"card-header bg-light p-2"},r.a.createElement("img",{src:this.props.picture,alt:this.props.bodyPart,className:"picto d-block mx-auto"})),r.a.createElement("div",{className:"w-100 px-2"},r.a.createElement("div",{className:"card-title p-2 text-dark font-weight-light"},r.a.createElement("h4",{className:"font-weight-light"},this.props.bodyPart)),r.a.createElement("div",{className:"card-block p-2 pl-2 d-flex justify-content-end"},r.a.createElement(w.a,{variant:"outline-dark mr-2"},r.a.createElement("i",{className:"far fa-question-circle"})),r.a.createElement(w.a,{variant:"primary",className:"w-50",onClick:function(t){return e.clickHandler(t)},name:"neededSpecialist",value:this.props.neededSpecialist},"Valider")))))}}]),t}(n.Component)),se=le.a.ul({open:{transition:{ease:"easeInOut",duration:300},x:0,delayChildren:100,staggerChildren:120,opacity:1,delay:300},closed:{x:20,delay:300,opacity:0}}),ue=le.a.li({open:{transition:{ease:"easeInOut",duration:400},y:0,opacity:1,x:0},closed:{y:0,opacity:0,x:300}}),me=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={isOpen:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"clickHandler",value:function(e){this.props.updatePatient(e)}},{key:"userChoice",value:function(e){this.props.nextStep(e),this.props.onFormStep(this.props.totalSteps,this.props.currentStep)}},{key:"componentWillMount",value:function(){setTimeout(console.log("coucou pathos mount"),500)}},{key:"componentDidUpdate",value:function(e){!e.isActive&&this.props.isActive&&(console.log("coucou pathos-----------------"),this.setState({isOpen:!0}))}},{key:"render",value:function(){var e=this,t=this.state.isOpen,a=[{bodyPart:"Oeil",neededSpecialist:"Ophtalmologiques",image:"/images/pictos/ophtalmologie.svg",infoTitle:"",infoText:"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression. "},{bodyPart:"ORL",neededSpecialist:"Oto-rhino-laryngologiques",image:"/images/pictos/ORL2.png",infoTitle:"",infoText:"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans."},{bodyPart:"Dents",neededSpecialist:"Dentaires",image:"/images/pictos/dentaire.svg",infoTitle:"",infoText:"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition et la mise en page avant impression. "},{bodyPart:"Probl\xe8me \xe0 la gorge",neededSpecialist:"Oto-rhino-laryngologiques",image:"/images/pictos/gorge.svg",infoTitle:"",infoText:"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans."},{bodyPart:"Main (plaie ouverte)",neededSpecialist:"Plaies de la main",image:"/images/pictos/plaie_de_main.svg",infoTitle:"",infoText:"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans."},{bodyPart:"Poitrine",neededSpecialist:"G\xe9n\xe9rales",image:"/images/pictos/torso.svg",infoTitle:"",infoText:"La proctologie. Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition"},{bodyPart:"Ventre",neededSpecialist:"G\xe9n\xe9rales",image:"/images/pictos/ventre.svg",infoTitle:"",infoText:"La proctologie. Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition"},{bodyPart:"Gyn\xe9cologie",neededSpecialist:"Gyn\xe9co-obst\xe9tricales",image:"/images/pictos/gynecologie.svg",infoTitle:"",infoText:"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans."},{bodyPart:"Grossesse",neededSpecialist:"Gyn\xe9co-obst\xe9tricales",image:"/images/pictos/grossesse.svg",infoTitle:"",infoText:"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans."},{bodyPart:"C\xf4lon",neededSpecialist:"Proctology",image:"/images/pictos/anus.svg",infoTitle:"",infoText:"La proctologie. Lorem Ipsum est simplement du faux texte employ\xe9 dans la composition"},{bodyPart:"Psychiatrie",neededSpecialist:"Psychiatriques",image:"/images/pictos/psychiatrie.svg",infoTitle:"",infoText:"Le Lorem Ipsum est simplement du faux texte employ\xe9 dans."},{bodyPart:"Brulure (medecine g\xe9n\xe9rale)",neededSpecialist:"G\xe9n\xe9rales",image:"/images/pictos/brulure.svg",infoTitle:"",infoText:"Pour tout autre type d'urgence."},{bodyPart:"Fracture (medecine g\xe9n\xe9rale)",neededSpecialist:"G\xe9n\xe9rales",image:"/images/pictos/fracture.svg",infoTitle:"",infoText:"Pour tout autre type d'urgence."},{bodyPart:"Medecine g\xe9n\xe9rale",neededSpecialist:"G\xe9n\xe9rales",image:"/images/pictos/medical.svg",infoTitle:"",infoText:"Pour tout autre type d'urgence."}];return r.a.createElement("section",{id:"PathologyCards"},r.a.createElement("p",{className:"lead text-center"},r.a.createElement("span",{className:"float-left pl-3"},r.a.createElement(ie.a,{to:"#0",onClick:this.props.previousStep,className:"text-secondary"},r.a.createElement("i",{className:"fas fa-arrow-left mx-2"}),"Retour")),r.a.createElement("span",{className:"text-center mr-4 pr-4"},"O\xf9 se situe la douleur ?")),r.a.createElement(J.a,{className:"d-flex justify-content-center"},r.a.createElement(K.a,{xs:12,sm:12,md:9,lg:6},r.a.createElement(se,{pose:t?"open":"closed",className:"list-unstyled"},a.map(function(t,a){return r.a.createElement(ue,{key:a,className:"item"},r.a.createElement(ce,{bodyPart:t.bodyPart,picture:t.image,neededSpecialist:t.neededSpecialist,infoText:t.infoText,index:a,updatePatient:function(t){return e.props.updatePatient(t)},nextStep:function(t){return e.userChoice(t)}}))})))))}}]),t}(n.Component),pe=(a(185),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"clickHandler",value:function(e){this.props.nextStep(),this.props.updatePatient(e),this.props.onFormStep(this.props.totalSteps,this.props.currentStep)}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"text-center"},r.a.createElement("div",{className:"bg-toy"}),r.a.createElement("p",{className:"lead my-4"},"Le patient a-t-il plus de 16 ans ?"),r.a.createElement(w.a,{variant:"primary",onClick:function(t){return e.clickHandler(t)},name:"patientAdult",value:"Enfants"},"Enfant"),r.a.createElement(w.a,{variant:"secondary",onClick:function(t){return e.clickHandler(t)},name:"patientAdult",value:"Adultes",className:"mx-3"},"Adulte"))}}]),t}(n.Component));a(186);var de=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t,a=this.props,n=a.numberOfSteps,o=a.currentStep;return r.a.createElement("section",null,(e=n,t=o,Array.apply(null,{length:e}).map(function(e,a){return r.a.createElement("span",{key:a,className:a===t?" dot active":"dot"},"\u2022")})))}}]),t}(n.Component),he=a(40),ge=a.n(he),fe=a(63),be=a.n(fe),ve=(a(187),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={currentUserPosition:{latitude:null,longitude:null},addressInputValue:"",isLoadingCoordinates:!1,toMapResults:!1,validated:!1},a.autocompleteInput=r.a.createRef(),a.autocomplete=null,a.handlePlaceChanged=a.handlePlaceChanged.bind(Object(j.a)(a)),a.getUserLocationBrowser=a.getUserLocationBrowser.bind(Object(j.a)(a)),a.handleChange=a.handleChange.bind(Object(j.a)(a)),a.goToResult=a.goToResult.bind(Object(j.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=new google.maps.LatLng(48.1203,1.4467),t=new google.maps.LatLng(49.2413,3.5585),a=new google.maps.LatLngBounds(e,t);this.autocomplete=new google.maps.places.Autocomplete(this.autocompleteInput.current,{bounds:a,types:["geocode"],componentRestrictions:{country:"fr"}}),this.autocomplete.addListener("place_changed",this.handlePlaceChanged)}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(c.a)({},n,a))}},{key:"handlePlaceChanged",value:function(){this.setState({isLoadingCoordinates:!0});var e=this.autocomplete.getPlace(),t=e.geometry.viewport.ga.l,a=e.geometry.viewport.ma.l;this.setState({currentUserPosition:{latitude:a,longitude:t},isLoadingCoordinates:!1}),this.props.onGeolocation(a,t),this.goToResult()}},{key:"handleSubmit",value:function(e){!1===e.currentTarget.checkValidity()&&(e.preventDefault(),e.stopPropagation()),this.setState({validated:!0})}},{key:"getUserLocationBrowser",value:function(){var e=this,t=this.state,a=t.currentUserPosition,n=t.isLoadingCoordinates;if(!a.latitude){this.toggleSearchCoordinates(n);var r=window.navigator&&window.navigator.geolocation;r&&r.getCurrentPosition(function(t){var a=e.state.isLoadingCoordinates;e.toggleSearchCoordinates(a),e.reverseGeocode(t.coords.latitude,t.coords.longitude),e.props.onGeolocation(t.coords.latitude,t.coords.longitude),e.goToResult()},function(t){e.setState({latitude:"err-latitude",longitude:"err-longitude"}),console.log("Cannot find you err..:",t)})}}},{key:"toggleSearchCoordinates",value:function(e){this.setState({isLoadingCoordinates:!e})}},{key:"reverseGeocode",value:function(e,t){var a=this,n={key:"AIzaSyCxJQJeyVha8_vtogTc2bJTxYfubmdBfo8",latlng:"".concat(e,",").concat(t)};return T.a.get("https://maps.googleapis.com/maps/api/geocode/json?key=".concat(n.key,"&latlng=").concat(n.latlng)).then(function(e){a.setState({addressInputValue:e.data.results[0].formatted_address})})}},{key:"goToResult",value:function(){this.setState({toMapResults:!0})}},{key:"render",value:function(){var e=this,t=this.state.validated;return!0===this.state.toMapResults?r.a.createElement(Y.a,{to:"/map"}):r.a.createElement(ge.a,{noValidate:!0,validated:t,onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement(w.a,{variant:"primary",onClick:function(){e.getUserLocationBrowser()}},r.a.createElement("i",{className:"fas fa-map-marker-alt"}))),r.a.createElement(be.a,{type:"text",placeholder:"O\xf9 \xeates vous?",name:"addressInputValue",value:this.state.addressInputValue,onChange:this.handleChange,id:"autocomplete",ref:this.autocompleteInput,required:!0}),r.a.createElement("div",{className:"input-group-append"},this.state.isLoadingCoordinates?r.a.createElement(w.a,{variant:"info",onClick:this.goToResult},r.a.createElement("i",{className:"fas fa-circle-notch fa-spin"})):r.a.createElement(w.a,{type:"submit",variant:"outline-secondary"},r.a.createElement("i",{className:"fas fa-search"})))))}}]),t}(r.a.Component)),Ee=(a(195),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"text-center "},r.a.createElement("div",{className:"bg-directions m-4"}),r.a.createElement("p",{className:"lead my-4"},"Trouvez des soins proches de vous."),r.a.createElement(J.a,null,r.a.createElement(K.a,{sm:{span:12},className:" px-5 d-flex justify-content-center"},r.a.createElement(K.a,{className:"bg-light shadow-sm border rounded p-2 col-md-6 col-xs-12"},r.a.createElement(ve,{onGeolocation:this.props.onGeolocation,nextStep:function(t){return e.props.nextStep(t)}})))),r.a.createElement(J.a,null,r.a.createElement(K.a,{sm:{span:12},className:"d-flex justify-content-center"},r.a.createElement(ge.a,{className:"p-2 small w-50 mx-auto text-left"},r.a.createElement("div",{key:"hint-checkbox",className:"hint-checkbox m-2 px-2"},r.a.createElement("label",null,r.a.createElement(ge.a.Check,{type:"checkbox",id:"prescription",className:"d-inline mr-2"}),r.a.createElement("span",{className:"text-muted"},"C'est pour renouveller une ordonnance ?"," ",r.a.createElement("span",{className:"text-secondary"},"Cliquez ici !"))))))))}}]),t}(n.Component)),ye=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={numberOfSteps:3,currentStep:0},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"updateFormIndicator",value:function(e,t){this.setState({numberOfSteps:e,currentStep:t})}},{key:"render",value:function(){var e=this,t=this.state,a=t.numberOfSteps,n=t.currentStep;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"d-flex justify-content-center"},r.a.createElement(de,{numberOfSteps:a,currentStep:n})),r.a.createElement(oe.a,{onStepChange:this.handleStep,initialStep:1},r.a.createElement(pe,{hashKey:"age",updatePatient:function(t){return e.props.updatePatient(t)},onFormStep:function(t,a){return e.updateFormIndicator(t,a)}}),r.a.createElement(me,{hashKey:"service",updatePatient:function(t){return e.props.updatePatient(t)},onFormStep:function(t,a){return e.updateFormIndicator(t,a)}}),r.a.createElement(Ee,{hashKey:"position",onGeolocation:this.props.onGeolocation})))}}]),t}(n.Component),ke=(a(196),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={username:"",password:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"genericOnChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(c.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t,a=this;e.preventDefault(),(t=this.state,$.post("/api/process-signup",t).catch(ee)).then(function(e){console.log("sign up result",e.data),a.props.signupSuccess(e.data)})}},{key:"render",value:function(){var e=this,t=this.props.currentUser;return r.a.createElement("section",{className:"SignupPage"},t?r.a.createElement("div",null,r.a.createElement("h2",null,"You are signed up !")):r.a.createElement("div",null,r.a.createElement("h2",null,"Sign Up"),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",null,"Email :"," ",r.a.createElement("input",{onChange:function(t){e.genericOnChange(t)},value:this.state.email,type:"email",name:"username",placeholder:"Mon Email"})),r.a.createElement("label",null,"Mot de passe :"," ",r.a.createElement("input",{onChange:function(t){e.genericOnChange(t)},value:this.state.password,type:"password",name:"password",placeholder:"Mot de passe"})),r.a.createElement("button",null,"M'enregistrer"))))}}]),t}(n.Component)),Oe=a(68),xe=(a(197),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={username:"",password:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"genericOnChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(c.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t,a=this;e.preventDefault(),(t=this.state,$.post("/api/process-login",t).catch(ee)).then(function(e){console.log("log in",e.data),a.props.loginSuccess(e.data)})}},{key:"render",value:function(){var e=this;return this.props.currentUser?r.a.createElement(Oe.a,{to:"/form"}):r.a.createElement("section",{className:"LoginPage"},r.a.createElement("h2",null,"Log In"),r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("label",null,"Email:"," ",r.a.createElement("input",{onChange:function(t){return e.genericOnChange(t)},value:this.state.email,name:"username",type:"email",placeholder:"Mon Email"})),r.a.createElement("label",null,"Mot de Passe:"," ",r.a.createElement("input",{onChange:function(t){e.genericOnChange(t)},value:this.state.password,name:"password",type:"password",placeholder:"Mot de passe"})),r.a.createElement("button",null,"Se connecter")))}}]),t}(n.Component)),je=a(102),Ce=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.props.isGeolocationAvailable?this.props.isGeolocationEnabled?this.props.coords?r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"latitude"),r.a.createElement("td",null,this.props.coords.latitude)),r.a.createElement("tr",null,r.a.createElement("td",null,"longitude"),r.a.createElement("td",null,this.props.coords.longitude)),r.a.createElement("tr",null,r.a.createElement("td",null,"altitude"),r.a.createElement("td",null,this.props.coords.altitude)),r.a.createElement("tr",null,r.a.createElement("td",null,"heading"),r.a.createElement("td",null,this.props.coords.heading)),r.a.createElement("tr",null,r.a.createElement("td",null,"speed"),r.a.createElement("td",null,this.props.coords.speed)))):r.a.createElement("div",null,"Getting the location data\u2026 "):r.a.createElement("div",null,"Geolocation is not enabled"):r.a.createElement("div",null,"Your browser does not support Geolocation")}}]),t}(r.a.Component),Se=Object(je.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})(Ce);a(199).config();var Ne=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(m.a)(this,Object(p.a)(t).call(this,e));var n=localStorage.getItem("currentUser");return n&&(n=JSON.parse(n)),a.state={currentUser:n,patientGender:"",neededSpecialist:"",patientAdult:"",beforeChildren:!0,patientLocation:{latitude:0,longitude:0}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"updateUser",value:function(e){e?localStorage.setItem("currentUser",JSON.stringify(e)):localStorage.removeItem("currentUser"),this.setState({currentUser:e})}},{key:"updatePatient",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(c.a)({},a,n))}},{key:"updatePatientPosition",value:function(e,t){this.setState({patientLocation:{latitude:e,longitude:t}})}},{key:"logoutClick",value:function(){var e=this;$.get("/api/logout").catch(ee).then(function(t){e.updateUser(null)}).catch(function(e){return e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.neededSpecialist,n=t.patientAdult,o=t.patientLocation;return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(x,{currentUser:this.state.currentUser,logoutClick:function(){return e.logoutClick()}})),r.a.createElement(h.a,null,r.a.createElement(g.a,{path:"/",exact:!0,component:P,key:"isEmergency"}),r.a.createElement(g.a,{key:"3",path:"/map",render:function(){return r.a.createElement(ae,{neededSpecialist:a,patientType:n,userLocation:o})}}),r.a.createElement(g.a,{key:"geoloc",path:"/geoloc",component:Se}),r.a.createElement(g.a,{key:"form",path:"/form",render:function(){return r.a.createElement(ye,{updatePatient:function(t){return e.updatePatient(t)},onGeolocation:function(t,a){return e.updatePatientPosition(t,a)}})}}),r.a.createElement(g.a,{key:"signup",path:"/signup",render:function(){return r.a.createElement(ke,{currentUser:e.state.currentUser,signupSuccess:function(t){return e.updateUser(t)}})}}),r.a.createElement(g.a,{key:"login",path:"/login",render:function(){return r.a.createElement(xe,{currentUser:e.state.currentUser,loginSuccess:function(t){return e.updateUser(t)}})}}),r.a.createElement(g.a,{component:ne,key:"NotFound"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(i.a,null,r.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[104,1,2]]]);
//# sourceMappingURL=main.6fbb0b84.chunk.js.map